<!-- فرم ارسال کامنت -->
<div class="comment-form-wrapper">
  <h3>Leave a Comment</h3>

  {% if user.is_authenticated %}
  <form method="POST">
    {% csrf_token %}

    <div class="form-group">
      {{ form.body.label_tag }}
      {{ form.body }}
    </div>

    <button type="submit" class="submit-comment-btn">Post Comment</button>
  </form>

  {% else %}
  <div class="login-message">
    <p>
      برای ارسال کامنت باید ابتدا 
      <a href="{%url 'login' %}" class="login-link">وارد سایت</a> 
      شوید.
    </p>
  </div>
  {% endif %}
</div>

<style>
/* ---------- باکس اصلی ---------- */
.comment-form-wrapper {
  margin-top: 3rem;
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(10px);
  padding: 2.2rem;
  border-radius: 18px;
  border: 1px solid rgba(200, 210, 255, 0.4);
  box-shadow: 0 12px 25px rgba(51, 94, 234, 0.08);
}

/* ---------- تیتر ---------- */
.comment-form-wrapper h3 {
  font-size: 1.8rem;
  font-weight: 800;
  color: #2f3fa8;
  margin-bottom: 1.5rem;
}

/* ---------- استایل فرم ---------- */
form {
  display: flex;
  flex-direction: column;
  gap: 1.3rem;
}

.form-group label {
  font-weight: 600;
  font-size: 1rem;
  color: #3e4b75;
}

/* ---------- استایل TextArea ---------- */
textarea {
  padding: 14px;
  font-size: 1rem;
  border-radius: 12px !important;
  border: 1px solid #c9d4f8;
  min-height: 130px;
  resize: none;
  background: #f8faff;
  transition: 0.25s ease;
}

textarea:focus {
  outline: none;
  border-color: #335eea;
  box-shadow: 0 0 0 4px rgba(51, 94, 234, 0.20);
}

/* ---------- دکمه ارسال ---------- */
.submit-comment-btn {
  width: 190px;
  padding: 12px;
  background: linear-gradient(135deg, #335eea, #2a49d4);
  color: #fff;
  font-weight: 600;
  font-size: 1rem;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  transition: 0.25s ease;
}

.submit-comment-btn:hover {
  transform: translateY(-3px);
  background: linear-gradient(135deg, #2a49d4, #2036b5);
  box-shadow: 0 12px 20px rgba(51, 94, 234, 0.25);
}

/* ---------- پیام کاربران غیر عضو ---------- */
.login-message {
  background: #fff;
  border: 1px solid #e0e6ff;
  padding: 1.2rem;
  border-radius: 12px;
  font-size: 1rem;
  color: #4a577a;
  box-shadow: 0 6px 15px rgba(51, 94, 234, 0.08);
}

.login-link {
  color: #335eea;
  font-weight: 700;
  text-decoration: none;
}

.login-link:hover {
  text-decoration: underline;
}

/* ---------- ریسپانسیو ---------- */
@media (max-width: 768px) {
  .submit-comment-btn {
    width: 100%;
  }
  textarea {
    min-height: 100px;
  }
}
</style>
